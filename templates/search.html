<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Search</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="mobile dark">
  <header class="topbar">
    <button class="back-btn" onclick="location.href='{{ url_for('home') }}'">←</button>
    <div class="title">Search</div>
    <div class="top-actions">⋮</div>
  </header>

  <main class="list-screen">
    <form class="search-box" action="{{ url_for('search') }}" method="get">
      <input type="search" name="q" placeholder="Search songs, artists..." value="{{ q }}" />
      <button type="submit">🔎</button>
    </form>

    <section class="results">
      {% for r in results %}
      <div class="result-item">
        <img src="{{ r.thumb }}" alt="" />
        <div class="r-info">
          <div class="r-title">{{ r.title }}</div>
          <div class="r-sub">{{ r.artist }}</div>
        </div>
        <div class="r-actions">
          <!-- Play immediately by navigating to /player with audio param -->
          <a class="play-btn" href="{{ url_for('player') }}?audio={{ r.audio|urlencode }}&title={{ r.title|urlencode }}&thumb={{ r.thumb|urlencode }}">▶</a>
          <!-- Optionally add to favorites via client JS -->
          <button class="fav-small" onclick="addFavoriteFromSearch(event, '{{ r.title|e }}', '{{ r.artist|e }}', '{{ r.audio|e }}', '{{ r.thumb|e }}')">♡</button>
        </div>
      </div>
      {% endfor %}
    </section>
  </main>

  <nav class="bottom-nav">
    <a class="nav-item" href="{{ url_for('home') }}">🏠</a>
    <a class="nav-item active" href="{{ url_for('search') }}">🔍</a>
    <a class="nav-item" href="{{ url_for('profile') }}">👤</a>
  </nav>

  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
