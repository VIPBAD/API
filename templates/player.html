<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{{ title }}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="mobile dark">
  <header class="topbar">
    <button class="back-btn" onclick="location.href='{{ url_for('home') }}'">‚Üê</button>
    <div class="title">Now Playing</div>
    <div class="top-actions">‚ãÆ</div>
  </header>

  <main class="player-screen">
    <div class="album-wrap">
      <img id="player-thumb" class="album-large" src="{{ thumb }}" alt="Album">
    </div>

    <div class="track-info">
      <div class="track-title" id="title">{{ title }}</div>
      <div class="track-artist" id="artist">{{ artist }}</div>
    </div>

    <div class="progress">
      <span id="current">0:00</span>
      <input id="seek" type="range" min="0" max="100" value="0" />
      <span id="total">0:00</span>
    </div>

    <div class="controls">
      <button class="ctrl">‚èÆ</button>
      <button id="playBtn" class="play-prim" onclick="togglePlay()">‚èµ</button>
      <button class="ctrl">‚è≠</button>
    </div>

    <div class="volume-control">
      <input type="range" id="volume" min="0" max="1" step="0.1" value="1" oninput="setVolume(this.value)">
    </div>

    <div class="bottom-actions">
      <button class="circle">‚ô°</button>
      <div class="spacer"></div>
      <button class="circle">‚Üª</button>
    </div>

    <audio id="audio" preload="auto" src="{{ audio_url }}"></audio>
  </main>

  <nav class="bottom-nav elevated">
    <a class="nav-item" href="{{ url_for('home') }}">üè†</a>
    <a class="nav-item" href="{{ url_for('search') }}">üîç</a>
    <a class="nav-item active" href="{{ url_for('profile') }}">üë§</a>
  </nav>

  <script>
    const initial = {
      audioUrl: "{{ audio_url }}",
      title: "{{ title }}",
      thumb: "{{ thumb }}"
    };

    function togglePlay() {
      const audio = document.getElementById('audio');
      const playBtn = document.getElementById('playBtn');
      if (audio.paused) {
        audio.play();
        playBtn.textContent = '‚è∏';
      } else {
        audio.pause();
        playBtn.textContent = '‚èµ';
      }
    }

    function setVolume(value) {
      const audio = document.getElementById('audio');
      audio.volume = value;
    }
  </script>
  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
